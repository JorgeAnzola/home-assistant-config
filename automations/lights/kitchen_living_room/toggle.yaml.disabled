---
alias: Kitchen + Living room light - Toggle circadian light

trigger:
  - platform: event
    event_type: xiaomi_aqara.click
    event_data:
      entity_id: binary_sensor.wall_switch_3_both
      click_type: both
condition: [ ]
action:
  - choose:
      - conditions:
          - condition: and
            conditions:
              - condition: state
                entity_id: light.kitchen
                state: 'off'
              - condition: state
                entity_id: light.living_room
                state: 'off'
              - condition: state
                entity_id: sun.sun
                state: 'below_horizon'
        sequence:
          - service: light.turn_on
            data: !include /config/general_utilities/lights/warm_light.yaml
            entity_id: light.kitchen
          - service: light.turn_on
            data: !include /config/general_utilities/lights/warm_light.yaml
            entity_id: light.living_room
      - conditions:
          - condition: state
            entity_id: light.kitchen
            state: 'off'
          - condition: state
            entity_id: light.living_room
            state: 'off'
          - condition: state
            entity_id: sun.sun
            state: 'above_horizon'
        sequence:
          - service: light.turn_on
            data:
              data: !include /config/general_utilities/lights/white_light.yaml
            entity_id: light.kitchen
          - service: light.turn_on
            data:
              data: !include /config/general_utilities/lights/white_light.yaml
            entity_id: light.living_room
    default:
      - service: light.turn_off
        entity_id: light.kitchen
      - service: light.turn_off
        entity_id: light.living_room
mode: single
